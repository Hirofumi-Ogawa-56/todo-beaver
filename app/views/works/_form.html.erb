<!-- app/views/works/_form.html.erb -->
<%= form_with(model: work, class: "flex flex-col h-full bg-white") do |f| %>
  
  <%# 固定ツールバー（保存ボタンなど） %>
    <div class="sticky top-0 z-10 bg-white border-b border-gray-100 px-4 py-2 flex justify-between items-center">
      <div class="flex items-center gap-2">
        <%# 一覧に戻るリンク（Google Docのアイコン位置） %>
        <%= link_to works_path, class: "p-2 hover:bg-gray-100 rounded-full transition-colors", title: "ホーム" do %>
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
        </svg>
        <% end %>

        <div class="flex flex-col ml-1">
        <div class="flex items-center gap-2 text-xs">
            <span class="font-medium text-blue-600"><%= work.work_type_human_name %></span>
            <span class="text-gray-300">|</span>
            <%= f.collection_select :team_id, 
                                    current_profile.teams, 
                                    :id, 
                                    :name, 
                                    { include_blank: "個人実績" }, 
                                    class: "border-none bg-transparent hover:bg-gray-100 rounded px-1 py-0.5 cursor-pointer focus:ring-0 text-gray-500" %>
        </div>
      </div>
    </div>
    
    <div class="flex items-center gap-3">
      <span class="text-xs text-gray-400 mr-2" id="save-status">
        <%= work.persisted? ? "最終保存: #{f.object.updated_at.strftime("%m/%d %H:%M")}" : "未保存" %>
      </span>
      <%= f.submit "保存", class: "px-6 py-1.5 bg-blue-600 text-white rounded-full text-sm font-bold hover:bg-blue-700 transition-colors shadow-sm cursor-pointer" %>
    </div>
  </div>

  <%# スクロール可能なエディタエリア %>
  <div class="flex-1 overflow-y-auto bg-gray-50 pt-10 pb-20 px-4">
    <div class="max-w-[800px] mx-auto bg-white shadow-sm border border-gray-200 min-h-[1056px] p-[60px] md:p-[90px]">
      
      <%# タイトル：ラベルなしの巨大入力 %>
      <div class="mb-8">
        <%= f.text_field :title, 
                         class: "w-full text-4xl font-bold border-none focus:ring-0 p-0 placeholder-gray-200 text-gray-800", 
                         placeholder: "無題のドキュメント" %>
      </div>

      <%# 本文：Markdownエリア %>
      <div class="relative">
        <%= f.text_area :body, 
                        class: "w-full border-none focus:ring-0 p-0 font-mono text-lg leading-relaxed text-gray-700 resize-none min-h-[700px]", 
                        placeholder: "ここから入力を開始...",
                        data: { controller: "textarea-autosize" } %>
      </div>
    </div>
  </div>

  <%= f.hidden_field :work_type %>
<% end %>