<!-- app/views/teams/_form.html.erb -->
<%= form_with model: @team, local: true do |f| %>
  <% if @team.errors.any? %>
    <div class="mb-4 text-sm text-red-700 bg-red-50 px-3 py-2 rounded">
      <p class="font-semibold"><%= @team.errors.count %>件のエラーがあります。</p>
      <ul class="list-disc list-inside">
        <% @team.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="mb-4 max-w-md">
    <%= f.label :name, "チーム名", class: "block text-sm mb-1" %>
    <%= f.text_field :name,
                     class: "w-full border border-gray-200 rounded px-3 py-2 text-sm",
                     placeholder: "チーム名を入力してください" %>
  </div>

  <div class="mb-4">
    <%= f.label :avatar, "チームアイコン", class: "block text-sm mb-1" %>

    <% if @team.avatar.attached? %>
      <div class="mb-2">
        <%= team_avatar(@team, size: :md) %>
      </div>
    <% end %>

    <%= f.file_field :avatar,
                     accept: "image/*",
                     class: "block w-full text-sm" %>

    <% if @team.avatar.attached? %>
      <label class="mt-2 inline-flex items-center text-xs text-red-600">
        <%= f.check_box :remove_avatar, class: "mr-1" %>
        画像を削除する
      </label>
    <% end %>

    <p class="text-[11px] text-gray-500 mt-1">
      正方形の画像がおすすめです（例: 400×400）。
    </p>
  </div>
  
  <%= f.submit "チームを作成する",
               class: "px-4 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700" %>
<% end %>
