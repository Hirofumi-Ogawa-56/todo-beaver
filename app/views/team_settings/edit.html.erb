<!-- app/views/team_settings/edit.html.erb -->
<% content_for :sidebar do %>
  <%= render "team_settings/sidebar" %>
<% end %>

<h1 class="text-xl font-bold mb-4">チーム編集</h1>

<div class="mb-4">
  <%= link_to "チームを作成する",
              new_team_path,
              class: "text-sm px-3 py-2 bg-blue-100 text-blue-700 rounded border border-blue-300 hover:bg-blue-200" %>
</div>

<% if @teams.any? %>
  <table class="w-full text-sm">
    <thead>
      <tr class="border-b">
        <th class="text-left py-2">チーム名</th>
        <th class="text-left py-2">プロフィール参加ID</th>
        <th class="text-left py-2">作成日</th>
        <th class="text-left py-2"></th>
      </tr>
    </thead>
    <tbody>
      <% @teams.each do |team| %>
        <tr class="border-b">
          <td class="py-2">
            <%= link_to team_path(team), class: "inline-block" do %>
              <%= team_chip(
                    team,
                    size: :xs,
                    wrapper_class: "px-2 py-1 rounded bg-gray-100 text-xs"
                  ) %>
            <% end %>
          </td>
          <td class="py-2 font-mono text-xs text-gray-600">
            <%= team.join_token.presence || "-" %>
          </td>
          <td class="py-2"><%= l(team.created_at.to_date) %></td>
          <td class="py-2 text-right">
            <%= link_to "編集",
                        edit_team_path(team),
                        class: "text-xs text-blue-600 underline mr-3" %>

            <%= button_to "削除",
              team_path(team),
              method: :delete,
              form: { data: { turbo_confirm: "本当に削除しますか？" } },
              class: "text-xs text-red-600 underline bg-transparent border-0 p-0 inline" %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p class="text-sm text-gray-500">
    まだチームがありません。「チームを作成する」から追加してください。
  </p>
<% end %>